name: upfromgede

on: workflow_dispatch

jobs:
  upload:
    runs-on: ubuntu-latest

    env:
      REPO: ${{ github.repository }}
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

    steps:
      - uses: actions/checkout@v4

      - name: Install tools
        run: |
          python -m pip install --upgrade pip
          pip install gdown pyyaml

      - name: Authenticate gh CLI
        run: |
          echo "${GITHUB_TOKEN}" | gh auth login --with-token

      - name: Run upload script
        run: |
          python upload_releases.py
